# Инструкция по запуску сервера

## Быстрый старт

1. **Установите Node.js** (если еще не установлен)
   - Скачайте с https://nodejs.org/
   - Версия 16 или выше

2. **Установите зависимости:**
   ```bash
   npm install
   ```

3. **Запустите сервер:**
   ```bash
   npm start
   ```

   Или для разработки с автоперезагрузкой:
   ```bash
   npm run dev
   ```

4. **Сервер будет доступен на:**
   - http://localhost:3000

## Что делает сервер

✅ **Получение реального IP адреса** - определяет реальный IP пользователя через заголовки запроса

✅ **Запись всех посетителей** - сохраняет информацию о каждом, кто заходит:
   - IP адрес
   - User Agent
   - Имя пользователя
   - Канал
   - Действие (посещение, сообщение, участие в розыгрыше)
   - Время

✅ **Сохранение данных** - все данные сохраняются в папке `data/`:
   - Посетители
   - Пользователи
   - Розыгрыши
   - История чата
   - И многое другое

## Настройка

В файле `ewropg.html` найдите:
```javascript
const SERVER_URL = 'http://localhost:3000';
const USE_SERVER = true; // Включить использование сервера
```

Если сервер на другом адресе, измените `SERVER_URL`.
Если хотите отключить сервер, установите `USE_SERVER = false`.

## Структура данных

Все данные сохраняются в папке `data/`:
- `visitors.json` - все посетители
- `users.json` - пользователи системы
- `streamers.json` - стримеры
- `giveaways.json` - розыгрыши
- `winners.json` - победители
- `chat_history.json` - история чата
- `auth_log.json` - лог авторизаций

## API Endpoints

- `GET /api/ip` - получить реальный IP
- `POST /api/visitors` - зарегистрировать посетителя
- `GET /api/visitors` - получить список посетителей
- `GET /api/visitors/ip/:ip` - статистика по IP
- `POST /api/users` - сохранить данные пользователей
- `GET /api/users` - загрузить данные пользователей
- `POST /api/giveaways` - сохранить розыгрыши
- `GET /api/giveaways` - загрузить розыгрыши
- `GET /api/stats` - получить статистику

